((s,o,P)=>{let n=e=>document.querySelector(e),i=e=>document.querySelectorAll(e),t=n("#search"),a=()=>Math.floor(331*Math.random())+30,r="60%, 35%",l="70%, 50%";window.CSS.registerProperty({name:"--main-bg-color-1",syntax:"<color>",initialValue:`hsl(${a()}, ${window.matchMedia("(prefers-color-scheme: dark)").matches?r:l})`,inherits:!1}),window.CSS.registerProperty({name:"--main-bg-color-2",syntax:"<color>",initialValue:`hsl(${a()}, ${window.matchMedia("(prefers-color-scheme: dark)").matches?r:l})`,inherits:!1}),window.CSS.registerProperty({name:"--main-bg-color-3",syntax:"<color>",initialValue:`hsl(${a()}, ${window.matchMedia("(prefers-color-scheme: dark)").matches?r:l})`,inherits:!1});window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{document.body.style.setProperty("--main-bg-color-1",`hsl(${a()}, ${e.matches?r:l})`),document.body.style.setProperty("--main-bg-color-2",`hsl(${a()}, ${e.matches?r:l})`),document.body.style.setProperty("--main-bg-color-3",`hsl(${a()}, ${e.matches?r:l})`)}),window.onload=()=>{t.focus()},document.addEventListener("keydown",e=>{"/"===e.key&&"search"!==document.activeElement.id&&"new-bookmark-url"!==document.activeElement.id&&"new-calendar-event-name"!==document.activeElement.id&&"new-calendar-event-date"!==document.activeElement.id&&(e.preventDefault(),t.focus())}),n("#hint").addEventListener("click",()=>t.focus());let d=n("#greeting h1"),c=["kia ora","h√´j","hƒÅllo","hello","–ó–¥—Ä–∞–≤–µ–π—Ç–µ","como est√°s","ŸÖÿ±ÿ≠ÿ®ÿß","‡§®‡§Æ‡§∏‡•ç‡§§‡•á","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","„Åì„Çì„Å´„Å°„ÅØ","heljo","wjat","üá≥üáø","üéÖ","üç∫","üèñ","ü§†","üí©","üÜí","sup dog","sup√© dog√©","¬øque pasa?","how do"];var e=c[Math.floor(Math.random()*c.length)];d.innerText=e,document.title=e,d.addEventListener("click",()=>{var e=c[Math.floor(Math.random()*c.length)];d.innerText=e,document.title=e;let t=new s;t.addConfetti({confettiRadius:4,confettiNumber:300}),setTimeout(()=>{t.clearCanvas(),i("canvas")[0].remove()},5e3),e=window.matchMedia("(prefers-color-scheme: dark)").matches,document.body.style.setProperty("--main-bg-color-1",`hsl(${a()}, ${e?r:l})`),document.body.style.setProperty("--main-bg-color-2",`hsl(${a()}, ${e?r:l})`),document.body.style.setProperty("--main-bg-color-3",`hsl(${a()}, ${e?r:l})`)});let m,C=Math.round(Date.now()),H;{var e=(e=void 0)||5,u=new Date(C),e=u.getDay()-e,v=n("#beer");let t=[{title:"Beer o'clock",date:u,emoji:"üç∫"}];H=t,0<e?u.setDate(u.getDate()+6):e<0&&u.setDate(u.getDate()+-1*e),u.setHours(16),u.setMinutes(0),u.setSeconds(0),(e=JSON.parse(localStorage.getItem("marksyEvents")))&&e.forEach(e=>{t.push(e)}),e=t.length,n(":root").style.setProperty("--duration",14*e+"s"),n(".calendar-count").textContent=e+" event"+(1<e?"s":""),e=t.sort((e,t)=>new o(e.date).format("X")-new o(t.date).format("X")).map(e=>{var t,a=new o;return`<li 
                class="${o(e.date)<a&&"Beer o'clock"!==e.title?"display-none":""}" 
                title="${o(e.date).format("ddd, Do MMMM YYYY @ h:mm a")}">
                    <span class="${o(e.date)<a&&"Beer o'clock"!==e.title?"strike-through dim":""}">
                        ${e.title} ${t=e.date,o(t).fromNow()}
                    </span>
                    <span class="${o(e.date)<a&&"Beer o'clock"!==e.title?"dim":""}">
                        ${o(e.date)<a&&"Beer o'clock"!==e.title?"‚úÖ":e.emoji}
                    </span>
                </li>`}).join(""),v.innerHTML=`<div class="wrapper">
            <ul>
            ${e}
        </ul>
        <ul class="copy">
            ${e}
        </ul></div>
        `,m=u,v=n(":root"),e=n("#beer .wrapper ul").offsetWidth,v.style.setProperty("--amount",`-${e+2}px`)}let z=["January","February","March","May","April","June","July","August","September","October","November","December"],A=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],F=n("#time"),Y=n("#us-time"),q=n("#date"),h=()=>{(()=>{var e=new Date,t=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),a=(new Date).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/Chicago"});let o=t.replace(":",'<span class="blink">:</span>'),r=(o.startsWith("0")?o=o.substring(1):o,F.innerHTML=o,a.replace(":",'<span class="blink">:</span>'));if(r.startsWith("0")?r=r.substring(1):r,Y.innerHTML="üåé "+r,q.innerHTML=`${A[e.getDay()]} ${e.getDate()} ${z[e.getMonth()]} `+e.getFullYear(),(new Date).toDateString()===m.toDateString()&&16===(new Date).getHours()&&0===(new Date).getMinutes()){let e=new s;e.addConfetti({emojis:["üçª","üç∫","üç∑","üç∏","üçπ","ü•Ç","üçæ","üßâ"],confettiRadius:1,confettiNumber:200});new Notification("Beer o'clock",{body:"Grab yourself a cold one!",icon:"./beer.png"}),setTimeout(()=>{e.clearCanvas(),i("canvas")[0].remove()},5e3)}(JSON.parse(localStorage.getItem("marksyEvents"))||[]).forEach(e=>{var t;(new Date).toDateString()===new Date(e.date).toDateString()&&9===(new Date).getHours()&&30===(new Date).getMinutes()&&(t=e.title+" "+e.emoji,new Notification(e.title,{body:t,icon:"./default.png"}))})})(),setTimeout(()=>{h()},6e4)},p=(h(),n(".add-calendar-button")),g=n(".add-calendar-event-wrapper");u=n(".add-calendar-event-wrapper--cancel"),v=n(".add-calendar-event-wrapper--add");let k=n("#new-calendar-event-name"),b=n("#new-calendar-event-emoji"),w=n("#new-calendar-event-date"),f=n(".edit-calendar-button"),y=n(".dialog");e=n(".dialog-cancel");let R=n("#dialog-events"),L=JSON.parse(localStorage.getItem("marksyEvents"))||[],V=(0===L.length&&f.classList.add("hide"),p.addEventListener("click",()=>{p.classList.add("hide"),g.classList.add("show"),f.classList.add("hide"),k.focus()}),u.addEventListener("click",()=>{k.value="",b.value="",w.value="",p.classList.remove("hide"),g.classList.remove("show"),f.classList.remove("hide"),k.classList.remove("form-error"),b.classList.remove("form-error"),w.classList.remove("form-error")}),v.addEventListener("click",()=>{var e,t=JSON.parse(localStorage.getItem("marksyEvents"))||[];k.value||k.classList.add("form-error"),b.value||b.classList.add("form-error"),w.value||w.classList.add("form-error"),k.value&&w.value&&(e={title:k.value,emoji:b.value,date:w.value},t.push(e),localStorage.setItem("marksyEvents",JSON.stringify(t)),p.classList.remove("hide"),g.classList.remove("show"),f.classList.remove("hide"),location.reload())}),f.addEventListener("click",()=>{L=JSON.parse(localStorage.getItem("marksyEvents"))||[];let a="";L.forEach((e,t)=>{a+=`<div class="dialog-event"><span class="${o(e.date).isBefore(new Date)?"strike-through":""}">${e.title} - ${e.date}</span> <button type="button" class="btn delete-event" data-index="${t}">delete</button></div>`}),R.innerHTML=a,i(".delete-event").forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.index;L.splice(e,1),localStorage.setItem("marksyEvents",JSON.stringify(L)),y.close(),location.reload()})}),y.showModal()}),e.addEventListener("click",()=>{y.close()}),[{id:"sharesies",emoji:"üçç",title:"Sharesies",url:"https://app.sharesies.nz"},{id:"tv1-news",emoji:"üì∞",title:"TV1 news",url:"https://www.tvnz.co.nz/shows/one-news-at-6pm"},{id:"hacker-news",emoji:"üè¥‚Äç‚ò†Ô∏è",title:"Hacker news",url:"https://news.ycombinator.com"},{id:"rnz-news",emoji:"üìª",title:"RNZ news",url:"https://www.rnz.co.nz"},{id:"chat-gpt",emoji:"ü§ñ",title:"Chat GPT",url:"https://www.chatgpt.com"},{id:"reddit",emoji:"üëΩ",title:"Reddit",url:"https://www.reddit.com"}]),E=()=>JSON.parse(localStorage.getItem("marksyBookmarks"))&&0<JSON.parse(localStorage.getItem("marksyBookmarks")).length?JSON.parse(localStorage.getItem("marksyBookmarks")):[],S=()=>{var e=n(".links");let a="";0===E().length?a='<p>No bookmarks found. <button type="button" class="load-bookmarks">Load defaults</button> </p>':E().forEach((e,t)=>{a+=`<p><a href="${e.url}">${e.emoji} ${e.title}</a></p>`}),e.innerHTML=a;e=n(".load-bookmarks");e&&e.addEventListener("click",()=>{localStorage.setItem("marksyBookmarks",JSON.stringify(V)),S()})};S();u=n(".edit-bookmarks");let $=n(".bm-dialog"),W=n(".bookmark-contents"),M="",N=[],D=[],T=()=>{0===N.length&&(N=[...E()]),M="",N.forEach((e,t)=>{var a=0===t,o=t===N.length-1;M+=`
                <div class="row-item" id="${e.id}">
                    ${e.emoji} <span class="title" title="${e.url}">${e.title}</span>
                    <div class="bm-actions" style="display:inline-flex; gap:.5rem; margin-left:.5rem;">
                        <button type="button" class="btn bm-move-up" ${a?"disabled":""} data-index="${t}">‚Üë</button>
                        <button type="button" class="btn bm-move-down" ${o?"disabled":""} data-index="${t}">‚Üì</button>
                        <button type="button" class="btn delete-event delete-bookmark">delete</button>
                    </div>
                </div>`}),W.innerHTML=M,D.forEach(e=>{e=document.getElementById(e);e&&e.classList.add("strike-through","dim")}),i(".delete-bookmark").forEach(a=>{a.addEventListener("click",()=>{var e=a.closest(".row-item");let t=e.id;e.classList.contains("strike-through")?(e.classList.remove("strike-through","dim"),D=D.filter(e=>e!==t)):(e.classList.add("strike-through","dim"),D.includes(t)||D.push(t))})}),i(".bm-move-up").forEach(a=>{a.addEventListener("click",()=>{var e,t=Number(a.getAttribute("data-index"));0<t&&(e=N[t-1],N[t-1]=N[t],N[t]=e,T())})}),i(".bm-move-down").forEach(a=>{a.addEventListener("click",()=>{var e,t=Number(a.getAttribute("data-index"));t<N.length-1&&(e=N[t+1],N[t+1]=N[t],N[t]=e,T())})})};n(".bm-dialog-save").addEventListener("click",()=>{var e=N.filter(e=>!D.includes(e.id));localStorage.setItem("marksyBookmarks",JSON.stringify(e)),S(),M="",N=[],D=[],$.close()});n(".bm-dialog-cancel").addEventListener("click",()=>{$.close(),N=[],D=[]}),u.addEventListener("click",()=>{T(),$.showModal()});v=n(".add-bookmark");let j=n(".add-bm-dialog");v.addEventListener("click",()=>{j.showModal()}),n("#bookmark-form").addEventListener("submit",e=>{e.preventDefault();var e=n("#new-bookmark-emoji"),t=n("#new-bookmark-name"),a=n("#new-bookmark-url"),o={id:P.kebabCase(t.value),title:t.value,url:a.value,emoji:e.value},r=(console.log(o),E());r.push(o),localStorage.setItem("marksyBookmarks",JSON.stringify(r)),t.value="",a.value="",e.value="",S(),j.close()});n(".add-bm-dialog-cancel").addEventListener("click",()=>{j.close()});let x=n("#enable-notifications"),J=(x.addEventListener("click",()=>{"Notification"in window?Notification.requestPermission().then(e=>{x.hidden="granted"===e}):console.log("This browser does not support notifications.")}),"granted"===Notification.permission&&(x.hidden=!0),n("#calculate-temperature-button")),B=n("#temperature-input"),I=n("#calculated-temperature-value-div"),O=n("#calculate-temperature-clear-button"),G;J.addEventListener("click",e=>{e.preventDefault();var e=n('[name="temperature-unit"]:checked'),t=B.value,e=e.value;G=(t=t,e=e,t=Number(t),isNaN(t)?(B.classList.add("form-error"),""):(B.classList.remove("form-error"),("f"===e?1.8*t+32:(t-32)/1.8).toFixed()+"Àö"+e)),I.innerText=G}),B.addEventListener("keyup",e=>{O.disabled=B.value.length<=0,J.disabled=B.value.length<=0}),O.addEventListener("click",()=>{B.classList.remove("form-error"),B.value="",I.innerText="",O.disabled=!0,J.disabled=!0});{let t=n("#calculate-speed-button"),a=n("#speed-input"),o=n("#calculated-speed-value-div"),r=n("#calculate-speed-clear-button"),s;t.addEventListener("click",e=>{e.preventDefault();var e=n('[name="speed-unit"]:checked'),t=a.value,e=e.value;s=(t=t,e=e,t=Number(t),isNaN(t)?(a.classList.add("form-error"),""):(a.classList.remove("form-error"),("mph"===e?.621371*t:t/.621371).toFixed()+" "+e)),o.innerText=s}),a.addEventListener("keyup",e=>{r.disabled=a.value.length<=0,t.disabled=a.value.length<=0}),r.addEventListener("click",()=>{B.classList.remove("form-error"),B.value="",o.innerText="",r.disabled=!0,t.disabled=!0})}})(window.JSConfetti,window.moment,window._);