((s,o,n)=>{let i=e=>document.querySelector(e),l=e=>document.querySelectorAll(e),t=i("#search"),a=()=>Math.floor(331*Math.random())+30,r="60%, 35%",d="70%, 50%";window.CSS.registerProperty({name:"--main-bg-color-1",syntax:"<color>",initialValue:`hsl(${a()}, ${window.matchMedia("(prefers-color-scheme: dark)").matches?r:d})`,inherits:!1}),window.CSS.registerProperty({name:"--main-bg-color-2",syntax:"<color>",initialValue:`hsl(${a()}, ${window.matchMedia("(prefers-color-scheme: dark)").matches?r:d})`,inherits:!1}),window.CSS.registerProperty({name:"--main-bg-color-3",syntax:"<color>",initialValue:`hsl(${a()}, ${window.matchMedia("(prefers-color-scheme: dark)").matches?r:d})`,inherits:!1});window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{document.body.style.setProperty("--main-bg-color-1",`hsl(${a()}, ${e.matches?r:d})`),document.body.style.setProperty("--main-bg-color-2",`hsl(${a()}, ${e.matches?r:d})`),document.body.style.setProperty("--main-bg-color-3",`hsl(${a()}, ${e.matches?r:d})`)}),window.onload=()=>{t.focus()},document.addEventListener("keydown",e=>{"/"===e.key&&"search"!==document.activeElement.id&&"new-bookmark-url"!==document.activeElement.id&&"new-calendar-event-name"!==document.activeElement.id&&"new-calendar-event-date"!==document.activeElement.id&&(e.preventDefault(),t.focus())}),i("#hint").addEventListener("click",()=>t.focus());let c=i("#greeting h1"),m=["kia ora","h√´j","hƒÅllo","hello","–ó–¥—Ä–∞–≤–µ–π—Ç–µ","como est√°s","ŸÖÿ±ÿ≠ÿ®ÿß","‡§®‡§Æ‡§∏‡•ç‡§§‡•á","‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ","„Åì„Çì„Å´„Å°„ÅØ","heljo","wjat","üá≥üáø","üéÖ","üéÖ","üç∫","üèñ","ü§†","üí©","üÜí","sup dog","sup√© dog√©","¬øque pasa?"];var e=m[Math.floor(Math.random()*m.length)];c.innerText=e,document.title=e,c.addEventListener("click",()=>{var e=m[Math.floor(Math.random()*m.length)];c.innerText=e,document.title=e;let t=new s;t.addConfetti({confettiRadius:4,confettiNumber:300}),setTimeout(()=>{t.clearCanvas(),l("canvas")[0].remove()},5e3),e=window.matchMedia("(prefers-color-scheme: dark)").matches,document.body.style.setProperty("--main-bg-color-1",`hsl(${a()}, ${e?r:d})`),document.body.style.setProperty("--main-bg-color-2",`hsl(${a()}, ${e?r:d})`),document.body.style.setProperty("--main-bg-color-3",`hsl(${a()}, ${e?r:d})`)});let u,P=Math.round(Date.now()),C;{var e=(e=void 0)||5,v=new Date(P),e=v.getDay()-e,h=i("#beer");let t=[{title:"Beer o'clock",date:v,emoji:"üç∫"}];C=t,0<e?v.setDate(v.getDate()+6):e<0&&v.setDate(v.getDate()+-1*e),v.setHours(16),v.setMinutes(0),v.setSeconds(0),(e=JSON.parse(localStorage.getItem("marksyEvents")))&&e.forEach(e=>{t.push(e)}),e=t.length,i(":root").style.setProperty("--duration",14*e+"s"),i(".calendar-count").textContent=e+" event"+(1<e?"s":""),e=t.sort((e,t)=>new o(e.date).format("X")-new o(t.date).format("X")).map(e=>{var t,a=new o;return`<li 
                class="${o(e.date)<a&&"Beer o'clock"!==e.title?"display-none":""}" 
                title="${o(e.date).format("ddd, Do MMMM YYYY @ h:mm a")}">
                    <span class="${o(e.date)<a&&"Beer o'clock"!==e.title?"strike-through dim":""}">
                        ${e.title} ${t=e.date,o(t).fromNow()}
                    </span>
                    <span class="${o(e.date)<a&&"Beer o'clock"!==e.title?"dim":""}">
                        ${o(e.date)<a&&"Beer o'clock"!==e.title?"‚úÖ":e.emoji}
                    </span>
                </li>`}).join(""),h.innerHTML=`<div class="wrapper">
            <ul>
            ${e}
        </ul>
        <ul class="copy">
            ${e}
        </ul></div>
        `,u=v,h=i(":root"),e=i("#beer .wrapper ul").offsetWidth,h.style.setProperty("--amount",`-${e+2}px`)}let H=["January","February","March","May","April","June","July","August","September","October","November","December"],z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],F=i("#time"),Y=i("#us-time"),q=i("#date"),p=()=>{(()=>{var e=new Date,t=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),a=(new Date).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/Chicago"});let o=t.replace(":",'<span class="blink">:</span>'),r=(o.startsWith("0")?o=o.substring(1):o,F.innerHTML=o,a.replace(":",'<span class="blink">:</span>'));if(r.startsWith("0")?r=r.substring(1):r,Y.innerHTML="üåé "+r,q.innerHTML=`${z[e.getDay()]} ${e.getDate()} ${H[e.getMonth()]} `+e.getFullYear(),(new Date).toDateString()===u.toDateString()&&16===(new Date).getHours()&&0===(new Date).getMinutes()){let e=new s;e.addConfetti({emojis:["üçª","üç∫","üç∑","üç∏","üçπ","ü•Ç","üçæ","üßâ"],confettiRadius:1,confettiNumber:200});new Notification("Beer o'clock",{body:"Grab yourself a cold one!",icon:"./beer.png"}),setTimeout(()=>{e.clearCanvas(),l("canvas")[0].remove()},5e3)}(JSON.parse(localStorage.getItem("marksyEvents"))||[]).forEach(e=>{var t;(new Date).toDateString()===new Date(e.date).toDateString()&&9===(new Date).getHours()&&30===(new Date).getMinutes()&&(t=e.title+" "+e.emoji,new Notification(e.title,{body:t,icon:"./default.png"}))})})(),setTimeout(()=>{p()},6e4)},g=(p(),i(".add-calendar-button")),k=i(".add-calendar-event-wrapper");v=i(".add-calendar-event-wrapper--cancel"),h=i(".add-calendar-event-wrapper--add");let w=i("#new-calendar-event-name"),b=i("#new-calendar-event-emoji"),f=i("#new-calendar-event-date"),y=i(".edit-calendar-button"),L=i(".dialog");e=i(".dialog-cancel");let A=i("#dialog-events"),E=JSON.parse(localStorage.getItem("marksyEvents"))||[],R=(0===E.length&&y.classList.add("hide"),g.addEventListener("click",()=>{g.classList.add("hide"),k.classList.add("show"),y.classList.add("hide"),w.focus()}),v.addEventListener("click",()=>{w.value="",b.value="",f.value="",g.classList.remove("hide"),k.classList.remove("show"),y.classList.remove("hide"),w.classList.remove("form-error"),b.classList.remove("form-error"),f.classList.remove("form-error")}),h.addEventListener("click",()=>{var e,t=JSON.parse(localStorage.getItem("marksyEvents"))||[];w.value||w.classList.add("form-error"),b.value||b.classList.add("form-error"),f.value||f.classList.add("form-error"),w.value&&f.value&&(e={title:w.value,emoji:b.value,date:f.value},t.push(e),localStorage.setItem("marksyEvents",JSON.stringify(t)),g.classList.remove("hide"),k.classList.remove("show"),y.classList.remove("hide"),location.reload())}),y.addEventListener("click",()=>{E=JSON.parse(localStorage.getItem("marksyEvents"))||[];let a="";E.forEach((e,t)=>{a+=`<div class="dialog-event"><span class="${o(e.date).isBefore(new Date)?"strike-through":""}">${e.title} - ${e.date}</span> <button type="button" class="delete-event" data-index="${t}">delete</button></div>`}),A.innerHTML=a,l(".delete-event").forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.index;E.splice(e,1),localStorage.setItem("marksyEvents",JSON.stringify(E)),L.close(),location.reload()})}),L.showModal()}),e.addEventListener("click",()=>{L.close()}),[{id:"sharesies",emoji:"üçç",title:"Sharesies",url:"https://app.sharesies.nz"},{id:"tv1-news",emoji:"üì∞",title:"TV1 news",url:"https://www.tvnz.co.nz/shows/one-news-at-6pm"},{id:"hacker-news",emoji:"üè¥‚Äç‚ò†Ô∏è",title:"Hacker news",url:"https://news.ycombinator.com"},{id:"rnz-news",emoji:"üìª",title:"RNZ news",url:"https://www.rnz.co.nz"},{id:"chat-gpt",emoji:"ü§ñ",title:"Chat GPT",url:"https://www.chatgpt.com"},{id:"reddit",emoji:"üëΩ",title:"Reddit",url:"https://www.reddit.com"}]),S=()=>JSON.parse(localStorage.getItem("marksyBookmarks"))&&0<JSON.parse(localStorage.getItem("marksyBookmarks")).length?JSON.parse(localStorage.getItem("marksyBookmarks")):[],$=()=>{var e=i(".links");let a="";0===S().length?a='<p>No bookmarks found. <button type="button" class="load-bookmarks">Load defaults</button> </p>':S().forEach((e,t)=>{a+=`<p><a href="${e.url}">${e.emoji} ${e.title}</a></p>`}),e.innerHTML=a;e=i(".load-bookmarks");e&&e.addEventListener("click",()=>{localStorage.setItem("marksyBookmarks",JSON.stringify(R)),$()})};$();v=i(".edit-bookmarks");let M=i(".bm-dialog"),V=i(".bookmark-contents"),N="",D=[];i(".bm-dialog-save").addEventListener("click",()=>{let t=[];S().forEach(e=>{D.includes(e.id)||t.push(e)}),localStorage.setItem("marksyBookmarks",JSON.stringify(t)),$(),N="",M.close()});i(".bm-dialog-cancel").addEventListener("click",()=>{M.close(),D=[]}),v.addEventListener("click",()=>{N="",S().forEach(e=>{N+=`<div class="row-item" id="${e.id}">${e.emoji} <span title="${e.url}">${e.title}</span> <button type="button" class="btn delete-event delete-bookmark">delete</button> </div>`}),V.innerHTML=N,l(".delete-bookmark").forEach((e,t)=>{e.addEventListener("click",()=>{e.parentElement.classList.contains("strike-through")?(e.parentElement.classList.remove("strike-through","dim"),D.pop(e.parentElement.id)):(e.parentElement.classList.add("strike-through","dim"),D.push(e.parentElement.id))})}),M.showModal()});h=i(".add-bookmark");let T=i(".add-bm-dialog");h.addEventListener("click",()=>{T.showModal()}),i("#bookmark-form").addEventListener("submit",e=>{e.preventDefault();var e=i("#new-bookmark-emoji"),t=i("#new-bookmark-name"),a=i("#new-bookmark-url"),o={id:n.kebabCase(t.value),title:t.value,url:a.value,emoji:e.value},r=(console.log(o),S());r.push(o),localStorage.setItem("marksyBookmarks",JSON.stringify(r)),t.value="",a.value="",e.value="",$(),T.close()});i(".add-bm-dialog-cancel").addEventListener("click",()=>{T.close()});let j=i("#enable-notifications"),J=(j.addEventListener("click",()=>{"Notification"in window?Notification.requestPermission().then(e=>{j.hidden="granted"===e}):console.log("This browser does not support notifications.")}),"granted"===Notification.permission&&(j.hidden=!0),i("#calculate-temperature-button")),x=i("#temperature-input"),O=i("#calculated-temperature-value-div"),B=i("#calculate-temperature-clear-button"),I;J.addEventListener("click",e=>{e.preventDefault();var e=i('[name="temperature-unit"]:checked'),t=x.value,e=e.value;I=(t=t,e=e,t=Number(t),isNaN(t)?(x.classList.add("form-error"),""):(x.classList.remove("form-error"),("f"===e?1.8*t+32:(t-32)/1.8).toFixed()+"Àö"+e)),O.innerText=I}),x.addEventListener("keyup",e=>{B.disabled=x.value.length<=0,J.disabled=x.value.length<=0}),B.addEventListener("click",()=>{x.classList.remove("form-error"),x.value="",O.innerText="",B.disabled=!0,J.disabled=!0});{let t=i("#calculate-speed-button"),a=i("#speed-input"),o=i("#calculated-speed-value-div"),r=i("#calculate-speed-clear-button"),s;t.addEventListener("click",e=>{e.preventDefault();var e=i('[name="speed-unit"]:checked'),t=a.value,e=e.value;s=(t=t,e=e,t=Number(t),isNaN(t)?(a.classList.add("form-error"),""):(a.classList.remove("form-error"),("mph"===e?.621371*t:t/.621371).toFixed()+" mph")),o.innerText=s}),a.addEventListener("keyup",e=>{r.disabled=a.value.length<=0,t.disabled=a.value.length<=0}),r.addEventListener("click",()=>{x.classList.remove("form-error"),x.value="",o.innerText="",r.disabled=!0,t.disabled=!0})}})(window.JSConfetti,window.moment,window._);